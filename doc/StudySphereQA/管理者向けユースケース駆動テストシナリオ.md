# 管理者向けユースケース駆動テストシナリオ

## 📋 概要

StudySphereシステムの管理者機能に対する包括的なユースケース駆動テストシナリオです。
管理者の実際の業務フローに基づいて、システム全体の動作を検証します。

## 🎯 テスト対象システム

- **対象**: StudySphere フロントエンド（React）
- **管理者権限**: システム全体の管理・設定
- **主要機能**: 事業所管理、指導員管理、コース管理、レッスン管理、カリキュラムパス管理、一時パスワード管理、管理者管理

---

## 🏢 ユースケース1: システム初期設定と管理者アカウント作成

### シナリオ1.1: 新規管理者アカウント作成
**目的**: システム管理者が新しい管理者アカウントを作成する

**前提条件**:
- システム管理者としてログイン済み（ユーザー名: tanaka_admin, パスワード: admin123）
- 管理者管理画面にアクセス可能

**実行手順**:
1. 管理者ダッシュボードにアクセス
2. 「👥 管理者管理」タブをクリック
3. 「新しい管理者を追加」ボタンをクリック
4. 以下の情報を入力:
   - 名前: 佐藤管理者
   - メールアドレス: sato_admin@example.com
   - ユーザー名: sato_admin
   - パスワード: admin123
   - ロール: 9（管理者）
   - ステータス: アクティブ
5. 「管理者を追加」ボタンをクリック

**期待される結果**:
- 管理者アカウントが正常に作成される
- 管理者一覧に新しい管理者が表示される
- 操作ログに作成履歴が記録される
- 成功メッセージが表示される

**検証項目**:
- [✓] フォームバリデーションが正常に動作する
- [ ] 重複メールアドレスチェックが機能する
- [ ] パスワード強度チェックが機能する
- [ ] データベースに正しく保存される
- [ ] 権限設定が正しく適用される

---

## 🏢 ユースケース2: 事業所・拠点管理

### シナリオ2.1: 新規事業所の登録
**目的**: 新しい事業所をシステムに登録する

**前提条件**:
- 管理者としてログイン済み（ユーザー名: tanaka_admin, パスワード: admin123）
- 事業所管理画面にアクセス可能

**実行手順**:
1. 管理者ダッシュボードにアクセス
2. 「🏢 事業所(拠点)管理」タブをクリック
3. 「新しい事業所を追加」ボタンをクリック
4. 事業所情報を入力:
   - 事業所名: 東京IT支援センター
   - 住所: 東京都渋谷区○○1-2-3
   - 電話番号: 03-1234-5678
   - 最大利用者数: 50
   - 契約タイプ: 30日間
   - ステータス: アクティブ
5. 「事業所を追加」ボタンをクリック

**期待される結果**:
- 事業所が正常に登録される
- 事業所一覧に新しい事業所が表示される
- 事業所詳細情報が正しく保存される

**検証項目**:
- [ ] 必須項目のバリデーションが機能する
- [ ] 事業所名の重複チェックが機能する
- [ ] 電話番号の形式チェックが機能する
- [ ] 最大利用者数の数値チェックが機能する

### シナリオ2.2: 拠点の追加
**目的**: 既存事業所に新しい拠点を追加する

**実行手順**:
1. 事業所一覧から対象事業所を選択
2. 「拠点を追加」ボタンをクリック
3. 拠点情報を入力:
   - 拠点名: 大阪支社
   - 住所: 大阪府大阪市○○区○○1-2-3
   - 電話番号: 06-1234-5678
   - 最大利用者数: 30
4. 「拠点を追加」ボタンをクリック

**期待される結果**:
- 拠点が正常に追加される
- 事業所詳細に拠点が表示される
- 拠点管理機能が利用可能になる

---

## 👨‍🏫 ユースケース3: 指導員管理

### シナリオ3.1: 新規指導員の登録
**目的**: 新しい指導員をシステムに登録する

**前提条件**:
- 管理者としてログイン済み（ユーザー名: tanaka_admin, パスワード: admin123）
- 指導員管理画面にアクセス可能
- 事業所・拠点が登録済み

**実行手順**:
1. 管理者ダッシュボードにアクセス
2. 「👨‍🏫 指導員管理」タブをクリック
3. 「新しい指導員を追加」ボタンをクリック
4. 指導員情報を入力:
   - 名前: 佐藤指導員
   - ユーザー名: sasaki_inst
   - メールアドレス: sasaki@example.com
   - パスワード: admin123
   - 担当拠点: 東京本校
   - 専門分野: ITリテラシー
   - ステータス: アクティブ
5. 「指導員を追加」ボタンをクリック

**期待される結果**:
- 指導員が正常に登録される
- 指導員一覧に新しい指導員が表示される
- 担当拠点との関連付けが正しく設定される
- 指導員用ログイン情報が生成される

**検証項目**:
- [✓] 指導員情報のバリデーションが機能する
- [✓] 拠点との関連付けが正しく設定される
- [✓] 権限設定が適切に適用される

### シナリオ3.2: 指導員の管理者権限設定
**目的**: 指導員に拠点管理者権限を付与する

**実行手順**:
1. 指導員一覧から対象指導員を選択
2. 「管理者設定」ボタンをクリック
3. 確認ダイアログで「はい」をクリック
4. 管理者権限が付与される

**期待される結果**:
- 指導員に管理者権限が付与される
- 指導員一覧で管理者ステータスが表示される
- 拠点管理機能が利用可能になる

---

## 📚 ユースケース4: コース・レッスン管理

### シナリオ4.1: 新規コースの作成
**目的**: 学習コースを新規作成する

**前提条件**:
- 管理者としてログイン済み（ユーザー名: tanaka_admin, パスワード: admin123）
- コース管理画面にアクセス可能

**実行手順**:
1. 管理者ダッシュボードにアクセス
2. 「📚 コース管理」タブをクリック
3. 「新しいコースを追加」ボタンをクリック
4. コース情報を入力:
   - コース名: デジタルリテラシー基礎
   - 説明: 基本的なデジタルスキルを学ぶコース
   - 対象レベル: 初級
   - 推定学習時間: 20時間
   - ステータス: アクティブ
5. 「コースを追加」ボタンをクリック

**期待される結果**:
- コースが正常に作成される
- コース一覧に新しいコースが表示される
- コース詳細情報が正しく保存される

### シナリオ4.2: レッスンの追加
**目的**: 既存コースにレッスンを追加する

**実行手順**:
1. コース一覧から対象コースを選択
2. 「レッスンを追加」ボタンをクリック
3. レッスン情報を入力:
   - レッスン名: 第1回 Windows基本操作
   - 説明: Windowsの基本的な操作方法を学ぶ
   - 動画URL: https://example.com/video1
   - PDFファイル: lesson1.pdf
   - 順序: 1
4. 「レッスンを追加」ボタンをクリック

**期待される結果**:
- レッスンが正常に追加される
- コース詳細にレッスンが表示される
- レッスン順序が正しく設定される

---

## 🎯 ユースケース5: カリキュラムパス管理

### シナリオ5.1: カリキュラムパスの作成
**目的**: 学習者の進路に応じたカリキュラムパスを作成する

**前提条件**:
- 管理者としてログイン済み（ユーザー名: tanaka_admin, パスワード: admin123）
- カリキュラムパス管理画面にアクセス可能
- コースが複数登録済み

**実行手順**:
1. 管理者ダッシュボードにアクセス
2. 「🎯 カリキュラムパス管理」タブをクリック
3. 「新しいカリキュラムパスを追加」ボタンをクリック
4. カリキュラムパス情報を入力:
   - パス名: IT基礎コース
   - 説明: ITの基礎知識を段階的に学ぶパス
   - 対象レベル: 初級〜中級
   - コース順序:
     1. デジタルリテラシー基礎
     2. プログラミング入門
     3. データベース基礎
5. 「カリキュラムパスを追加」ボタンをクリック

**期待される結果**:
- カリキュラムパスが正常に作成される
- コースの順序が正しく設定される
- パス一覧に新しいパスが表示される

---

## 🔑 ユースケース6: 一時パスワード管理

### シナリオ6.1: 一時パスワードの発行
**目的**: 利用者に一時パスワードを発行する

**前提条件**:
- 管理者としてログイン済み（ユーザー名: tanaka_admin, パスワード: admin123）
- 一時パスワード管理画面にアクセス可能
- 指導員が登録済み

**実行手順**:
1. 管理者ダッシュボードにアクセス
2. 「🔑 一時パスワード管理」タブをクリック
3. 「一時パスワードを発行」ボタンをクリック
4. 発行情報を設定:
   - 対象指導員: sasaki_inst
   - 有効期限: 7日間
   - アナウンスタイトル: 新規利用者向けログイン情報
   - アナウンスメッセージ: 以下のURLからログインしてください
5. 「一時パスワードを発行」ボタンをクリック

**期待される結果**:
- 一時パスワードが正常に発行される
- ログインURLが生成される
- 有効期限が正しく設定される
- アナウンスが送信される

**検証項目**:
- [✓] パスワードが安全に生成される
- [✓] 有効期限が正しく設定される
- [ ] アナウンス機能が正常に動作する

---

## 📊 ユースケース7: システム監視とログ管理

### シナリオ7.1: 操作ログの確認
**目的**: システムの操作履歴を確認する

**実行手順**:
1. 管理者ダッシュボードにアクセス
2. 「👥 管理者管理」タブをクリック
3. 「操作ログ」セクションを表示
4. ログフィルターを設定:
   - 管理者名: tanaka_admin
   - アクション: ユーザー作成
   - 期間: 過去7日間
5. 「ログを検索」ボタンをクリック

**期待される結果**:
- 該当する操作ログが表示される
- ログの詳細情報が正しく表示される
- フィルター機能が正常に動作する

### シナリオ7.2: ログのエクスポート
**目的**: 操作ログをCSVファイルでエクスポートする

**実行手順**:
1. 操作ログ画面で「CSVエクスポート」ボタンをクリック
2. ファイル名を指定して保存

**期待される結果**:
- CSVファイルが正常にダウンロードされる
- ログデータが正しくエクスポートされる

---

## 🔄 ユースケース8: システム設定とメンテナンス

### シナリオ8.1: システム設定の変更
**目的**: システム全体の設定を変更する

**実行手順**:
1. 管理者ダッシュボードにアクセス
2. 設定メニューを開く
3. システム設定を変更:
   - セッションタイムアウト: 30分
   - パスワード有効期限: 90日
   - ログ保持期間: 1年
4. 「設定を保存」ボタンをクリック

**期待される結果**:
- 設定が正常に保存される
- 変更が即座に反映される
- 設定変更ログが記録される

---

## 🚨 エラーケースシナリオ

### シナリオE1: 権限不足エラー
**目的**: 権限のない操作を実行した際のエラーハンドリングを確認

**実行手順**:
1. 一般指導員としてログイン
2. 管理者管理画面にアクセスを試行

**期待される結果**:
- アクセス拒否メッセージが表示される
- 適切なエラーページにリダイレクトされる
- セキュリティログが記録される

### シナリオE2: データ整合性エラー
**目的**: 不正なデータ入力時のエラーハンドリングを確認

**実行手順**:
1. 管理者としてログイン
2. 重複するメールアドレスで指導員を作成

**期待される結果**:
- バリデーションエラーが表示される
- データベースへの保存が拒否される
- ユーザーに適切なエラーメッセージが表示される

---

## 📋 テスト実行チェックリスト

### 基本機能テスト
- [ ] ログイン・ログアウト機能
- [ ] ダッシュボード表示
- [ ] ナビゲーション機能
- [ ] 権限チェック機能

### データ管理テスト
- [ ] CRUD操作（作成・読み取り・更新・削除）
- [ ] データバリデーション
- [ ] データ整合性チェック
- [ ] 検索・フィルター機能

### セキュリティテスト
- [ ] 認証・認可機能
- [ ] セッション管理
- [ ] 入力値サニタイゼーション
- [ ] CSRF対策

### パフォーマンステスト
- [ ] ページ読み込み速度
- [ ] 大量データ処理
- [ ] 同時アクセス処理
- [ ] メモリ使用量

### ユーザビリティテスト
- [ ] 直感的な操作
- [ ] エラーメッセージの分かりやすさ
- [ ] レスポンシブデザイン
- [ ] アクセシビリティ

---

## 📊 テスト結果記録

### テスト実行日: ___________
### テスト担当者: ___________
### テスト環境: ___________

| シナリオID | シナリオ名 | 結果 | 備考 |
|-----------|-----------|------|------|
| UC1.1 | 新規管理者アカウント作成 | | |
| UC2.1 | 新規事業所の登録 | | |
| UC2.2 | 拠点の追加 | | |
| UC3.1 | 新規指導員の登録 | | |
| UC3.2 | 指導員の管理者権限設定 | | |
| UC4.1 | 新規コースの作成 | | |
| UC4.2 | レッスンの追加 | | |
| UC5.1 | カリキュラムパスの作成 | | |
| UC6.1 | 一時パスワードの発行 | | |
| UC7.1 | 操作ログの確認 | | |
| UC7.2 | ログのエクスポート | | |
| UC8.1 | システム設定の変更 | | |
| E1 | 権限不足エラー | | |
| E2 | データ整合性エラー | | |

### 発見された問題
1. 
2. 
3. 

### 改善提案
1. 
2. 
3. 

---

**最終更新**: 2025-01-XX  
**更新者**: 開発チーム  
**次回レビュー**: 2025-01-XX
