# Study Sphere - 学習管理システム

階層管理対応学習システム（LMS：Learning Management System）のフロントエンドアプリケーションです。

## 概要

このプロジェクトは、就労移行支援事業所向けの学習管理システムのフロントエンド部分です。
管理者、指導員、利用者の3つの役割に対応した階層管理システムを提供し、実際の本格運用に対応しています。

## システム階層構造

```
管理者
└── 事業所（就労移行支援事業所等）
    └── 拠点（東京本校、大阪支校等）
        └── 指導員（同一拠点内で利用者を共有管理）
            └── 利用者
```

## ユーザー種別と機能

### 管理者機能
- **システム概要**: 全体統計の閲覧
- **事業所・拠点管理**: 事業所と拠点の追加・管理
- **指導員管理**: 指導員の追加・管理・有効無効化
- **全利用者閲覧**: システム内全利用者の状況確認
- **コース管理**: システム全体のコース管理
- **管理者管理**: 個別の管理者アカウントの追加・編集・操作ログ管理

### 指導員機能
- **クラス概要**: 担当クラスの統計確認
- **利用者管理**: 
  - 自分の利用者の追加・管理
  - 同一拠点の他の指導員の利用者も管理可能
  - 利用者用ログインURL生成・管理
- **学習進捗管理**: 利用者の進捗確認・指導
- **課題管理**: 課題設定・評価
- **在宅支援管理**: 在宅利用者の日々の記録・評価管理

### 利用者機能
- **学習ダッシュボード**: 自分の学習状況確認
- **コース学習**: 割り当てられたコースの受講
- **学習目標設定**: 個人目標の設定・管理
- **実績確認**: 学習実績とバッジの表示
- **学習効果テスト**: セクション・レッスン別のテスト受験

## 技術スタック

- **フロントエンド**: React 18
- **ルーティング**: React Router v6
- **スタイリング**: Tailwind CSS
- **認証**: JWT トークンベース認証
- **API通信**: Fetch API + カスタムインターセプター
- **状態管理**: React Context API

## 環境設定

### エンドポイント設定

システムは実行環境に応じて自動的にAPIエンドポイントを切り替えます：

```javascript
// 本番環境
https://backend.studysphere.ayatori-inc.co.jp

// ローカル開発環境
http://localhost:5050
```

### 環境変数

必要に応じて環境変数でエンドポイントを上書きできます：

```bash
# .env.local ファイルを作成
REACT_APP_API_URL=http://your-custom-api-url
```

## セットアップ

### 前提条件
- Node.js (v16以上推奨)
- npm または yarn
- バックエンドAPIサーバー（ローカル開発時）

### インストール

```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm start
```

ブラウザで `http://localhost:3000` を開いてアプリケーションを確認できます。

### ローカル開発時の注意

ローカル環境で動作させるには、バックエンドAPIサーバーが `http://localhost:5050` で起動している必要があります。

```bash
# バックエンドサーバーの起動確認
curl http://localhost:5050/api/health
```

## プロジェクト構造

```
src/
├── components/          # 再利用可能なコンポーネント
│   ├── contexts/        # React Context（認証等）
│   ├── learning/        # 学習関連コンポーネント
│   ├── student/         # 利用者向けコンポーネント
│   └── student-management/ # 利用者管理コンポーネント
├── pages/              # ページコンポーネント
├── utils/              # ユーティリティ関数
│   ├── api.js          # API呼び出し関数
│   ├── authUtils.js    # 認証関連ユーティリティ
│   └── httpInterceptor.js # HTTPインターセプター
└── App.js              # メインアプリケーション
```

## 認証システム

### JWT認証
- アクセストークン + リフレッシュトークン方式
- 自動トークン更新機能
- 認証エラー時の自動リダイレクト

### 一時パスワード認証
- 利用者向けの一時パスワード認証システム
- 有効期限管理機能

### 役割ベースアクセス制御
- 管理者（ロール4以上）
- 指導員（ロール4-8）
- 利用者（ロール1）

## デプロイ

### 本番環境

本番環境では `studysphere.ayatori-inc.co.jp` ドメインでホスティングされ、自動的に本番APIエンドポイントに接続されます。

### ビルド

```bash
# 本番用ビルド
npm run build

# ビルドファイルは build/ ディレクトリに生成されます
```

## 主要機能

### 学習管理
- コース・レッスン管理
- 学習進捗追跡
- 学習効果テスト（セクション・レッスン別）
- 合格証明書発行

### 利用者管理
- 利用者登録・編集
- 指導員割り当て
- コース・カリキュラムパス割り当て
- 一時パスワード管理

### 在宅支援
- 在宅利用者の日々の記録管理
- 達成度評価システム
- 個別支援計画管理

### 通知・メッセージ
- システム内メッセージ機能
- 未読メッセージ通知
- 操作ログ記録

## 開発ガイドライン

### コンポーネント設計
- 単一責任の原則に従ったコンポーネント設計
- 再利用可能なコンポーネントの作成
- Props による明示的なデータ受け渡し

### スタイリング
- Tailwind CSS を最優先で使用
- レスポンシブデザインの実装
- 一貫性のあるデザインシステム

### 状態管理
- ローカル状態は `useState` を使用
- グローバル状態は React Context API を使用
- 認証状態は `AuthContext` で管理

## トラブルシューティング

### よくある問題

1. **ローカルでログインできない**
   - バックエンドサーバーが起動しているか確認
   - `http://localhost:5050` にアクセス可能か確認

2. **API接続エラー**
   - ネットワーク接続を確認
   - エンドポイント設定を確認

3. **認証エラー**
   - トークンの有効期限を確認
   - ブラウザのローカルストレージをクリア

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## サポート

技術的な問題や質問がある場合は、プロジェクトのIssueページでお知らせください。
